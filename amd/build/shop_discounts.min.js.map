{"version":3,"file":"shop_discounts.min.js","sources":["../src/shop_discounts.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @module     block_shop_discounts\n * @package    blocks\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: true, undef:true\ndefine(['jquery', 'core/log', 'core/config'], function ($, log, cfg) {\n\n    var blockshopdiscounts = {\n\n        init: function() {\n            $('.shop-discount-data').on('change', this.submit_discount_form);\n            $('.shop-delete-code').on('click', this.clear_discount_code);\n            log.debug(\"Shop discount block AMD initialized\");\n        },\n\n        clear_discount_code: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            var that = $(this);\n            var shopid = that.attr('data-shopid');\n            var categoryid = that.attr('data-categoryid');\n            var discountid = that.attr('data-discountid');\n\n            var url = cfg.wwwroot + '/local/shop/front/view.php';\n            url += '?view=shop';\n            url += '&category=' + categoryid;\n            url += '&shopid=' + shopid;\n            url += '&what=cleardiscountcode';\n            url += '&sesskey=' + cfg.sesskey;\n            url += '&discountid=' + discountid;\n\n            location.replace(url);\n        },\n\n        submit_discount_form: function() {\n            var that = $(this);\n            var id = that.attr('data-discountid');\n            $('#shop-discount-' + id).submit();\n        }\n\n    };\n\n    return blockshopdiscounts;\n});\n"],"names":["define","$","log","cfg","init","on","this","submit_discount_form","clear_discount_code","debug","e","preventDefault","stopPropagation","that","shopid","attr","categoryid","discountid","url","wwwroot","sesskey","location","replace","id","submit"],"mappings":";;;;;;AAsBAA,6CAAO,CAAC,SAAU,WAAY,gBAAgB,SAAUC,EAAGC,IAAKC,WAEnC,CAErBC,KAAM,WACFH,EAAE,uBAAuBI,GAAG,SAAUC,KAAKC,sBAC3CN,EAAE,qBAAqBI,GAAG,QAASC,KAAKE,qBACxCN,IAAIO,MAAM,wCAGdD,oBAAqB,SAASE,GAC1BA,EAAEC,iBACFD,EAAEE,sBAEEC,KAAOZ,EAAEK,MACTQ,OAASD,KAAKE,KAAK,eACnBC,WAAaH,KAAKE,KAAK,mBACvBE,WAAaJ,KAAKE,KAAK,mBAEvBG,IAAMf,IAAIgB,QAAU,6BACxBD,KAAO,aACPA,KAAO,aAAeF,WACtBE,KAAO,WAAaJ,OACpBI,KAAO,0BACPA,KAAO,YAAcf,IAAIiB,QACzBF,KAAO,eAAiBD,WAExBI,SAASC,QAAQJ,MAGrBX,qBAAsB,eAEdgB,GADOtB,EAAEK,MACCS,KAAK,mBACnBd,EAAE,kBAAoBsB,IAAIC"}